# SPDX-License-Identifier: MIT                                                
# Copyright (c) 2021 GPUFORT Advanced Micro Devices, Inc. All rights reserved.
# Combine expressions from all grammar definitions
loopAnnotation = acc_parallel_loop | acc_kernels_loop | acc_loop | cuf_kernel_do


annotatedDoLoopStart = Optional( loopAnnotation, default=None) + 

annotatedDoLoop <<= Optional( loopAnnotation, default=None) +\
    doLoop +\
  Optional(ACC_END_PARALLEL_LOOP | ACC_END_KERNELS_LOOP) # will be consumed but suppressed


construct = accKernelBodyDirective | ifElseBlock | selectCaseBlock | annotatedDoLoop | whileLoop
statement = ( comment | printStatement | subroutineCall | matrixAssignment | complexAssignment | assignment )

block <<= Group(OneOrMore(statement | construct))

parallelRegionStart = acc_parallel | acc_kernels

loopKernel = Optional( parallelRegionStart, default=None ) + ( annotatedDoLoop | assignment )

