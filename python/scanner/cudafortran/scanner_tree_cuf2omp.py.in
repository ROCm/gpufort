# SPDX-License-Identifier: MIT                                                
# Copyright (c) 2021 GPUFORT Advanced Micro Devices, Inc. All rights reserved.
class CufLoopKernel2Omp(CufBackendBase):
    def transform(self,joinedLines,joinedStatements,statementsFullyCoverLines,indexHints=[]):
        """
        Analyze based on statements but modify original lines if these are
        fully covered by the statements.
        """
        try:
           parseResult = translator.loopKernel.parseString(joinedStatements)[0]
           snippet     = joinedLines if statementsFullyCoverLines else joinedStatements
           return parseResult.ompFStr(snippet), True 
        except Exception as e:
           print("failed: "+fSnippet) #TODO error handling
           raise e
           return "", False 

registerCufBackend("omp",CufLoopKernel2Omp,None)
